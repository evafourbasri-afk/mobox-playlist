name: ğŸ¥ M3U Scraper (ngefil.py)

on:
  workflow_dispatch:
  schedule:
    - cron: '0 2 * * *' 
  
jobs:
  scrape_and_update:
    runs-on: ubuntu-latest
    timeout-minutes: 30 

    steps:
    - name: â¬‡ï¸ Checkout Repository
      uses: actions/checkout@v4

    - name: âš™ï¸ Set up Python Environment
      # Dihapus: parameter 'cache' untuk menghindari error pencarian file dan error nilai 'false'
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
    
    # --- Pemasangan Dependensi ---
    
    - name: ğŸ“¦ Install Python Dependencies
      run: |
        echo "Installing Python libraries: requests, beautifulsoup4, playwright..."
        pip install requests beautifulsoup4 playwright
        
        echo "Installing Chromium browser for Playwright..."
        playwright install chromium
    
    # --- Eksekusi Skrip ---

    - name: ğŸš€ Run Python Scraper Script
      # Langkah ini seharusnya berjalan lancar setelah dependensi terinstal
      run: python ngefil.py

    # --- Penyimpanan Hasil ---

    - name: ğŸ’¾ Commit and Push M3U File
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: "ğŸ¤– Update M3U Playlist: ngefilm.m3u (Automated Scrape)"
        files: ngefilm.m3u
        branch: main 
        commit_user_name: GitHub Actions Bot
        commit_user_email: actions@github.com
